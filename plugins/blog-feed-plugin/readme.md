# docusaurus-blog-feed-plugin

## Purpose

This plugin generates a clean, standards-compliant RSS 2.0 feed for your Docusaurus blog. It reads the final built HTML, removes UI-only elements, and outputs a robust `rss.xml` with proper links, optional images, and sanitized content.

By default, Docusaurusâ€™s built-in blog feed may include UI artifacts or miss custom needs. This plugin gives you control over content cleaning and feed structure while keeping things simple and fast.

## How it works

* **postBuild**: After your site is built, the plugin scans the `blog` directory for `md/mdx` posts.
* **Slug resolution**: It uses the `slug` from front matter if present; otherwise it infers a hyphenated slug from the file path.
* **HTML extraction**: It reads the final HTML page for each post in the build output and extracts the main article container with safe defaults.
* **Cleaning**: It removes critical UI elements (`header`, `svg`), plus default optional selectors. You can add your own selectors via configuration.
* **Feed generation**: It builds an RSS 2.0 feed using `feed`, setting absolute URLs, optional images, and sanitized content.

## Setup

1. Place the plugin code in `plugins/blog-feed-plugin/index.mjs`.

2. Register the plugin in your `docusaurus.config.js`:

   ```js
   const config = {
     // ...
     plugins: [
     [ "./plugins/blog-feed-plugin/index.mjs", {
         maxItems: 20,           // optional
         includeContent: true,   // optional
         includeImages: true,    // optional
         stripSelectors: [       // optional â€” add any site-specific UI selectors to remove
          .custom-ads",
          .share-buttons",
          .newsletter-signup",
          ,
          gnorePatterns: ["**/_archived/**"], // optional
      }],
     ],
   };

   export default config;
   ```

3. Ensure `siteConfig.url` is set to your site origin (e.g., `https://www.example.com`). Without this, absolute URLs cannot be generated.

4. Build your site with npm run build or yarn build. The feed is written to:
   * File: `<build>/blog/rss.xml`
   * Route: `/blog/rss.xml`

## Options

* **maxItems** (number, default: `20`): Limit the number of items in the feed.

* **includeContent** (boolean, default: `true`): Include the cleaned HTML body of each post in the `<content>` field.

* **includeImages** (boolean, default: `true`): Add the post image at the top of the description and include an `<enclosure>` tag with proper MIME type.

* **stripSelectors** (string[], default: merged with defaults): Additional CSS selectors to remove from the article HTML. Critical selectors (`header`, `svg`) are always removed.

* **ignorePatterns** (string[], default: [`"**/_archived/**"`]): Glob patterns for excluding certain blog files.

## Benefits

* Clean, reader-friendly RSS output free from UI noise.
* Absolute URLs for feed items and images (reliable across clients).
* Configurable cleaning tailored to your siteâ€™s components.
* Handles inferred and explicit slugs robustly.

## Tips

* If your blog layout differs, add your specific selectors to `stripSelectors` to remove any extra wrappers or widgets.
* Keep `siteConfig.url` and `baseUrl` consistent to avoid malformed links.

## ðŸ“„ License

MIT â€” free to use, modify, and contribute.

## ðŸ’¬ AI generated

This code has been generated by Christophe Avonture using AI.
